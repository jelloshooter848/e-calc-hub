<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETASV App Hub - Training Tools for Electricians</title>
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="ETASV Training Hub">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ETASV">
    <meta name="description" content="Electrical Training Alliance of Silicon Valley - Course Registration and Training Hub">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1E3A8A">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="msapplication-TileColor" content="#1E3A8A">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="152x152" href="./icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="./icons/icon-192x192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/icon-192x192.png">
    <link rel="shortcut icon" href="./icons/icon-192x192.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'electric-blue': '#1E40AF',
                        'electric-yellow': '#FCD34D',
                        'electric-orange': '#F97316',
                        'steel-gray': '#475569',
                        'copper': '#B45309',
                        'etasv-blue': '#1E3A8A',
                        'etasv-navy': '#1E293B',
                        'etasv-gray': '#64748B',
                        'etasv-light': '#F1F5F9'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .etasv-template {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }
        .etasv-template h1, .etasv-template h2, .etasv-template h3, .etasv-template h4 {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            font-weight: 700;
        }
        .etasv-template .etasv-light-text {
            font-weight: 300;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1E40AF 0%, #3B82F6 100%);
        }
        .tool-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .tool-card:hover {
            transform: translateY(-4px);
            border-left-color: #F97316;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .icon-bg {
            background: linear-gradient(135deg, #FCD34D 0%, #F97316 100%);
        }
        .etasv-gradient-bg {
            background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 100%);
        }
        .etasv-icon-bg {
            background: linear-gradient(135deg, #3B82F6 0%, #1E3A8A 100%);
        }
        .toggle-button {
            transition: all 0.3s ease;
        }
        .toggle-button:hover {
            opacity: 0.8;
        }
        .etasv-template {
            display: block;
        }
        .etasv-template.active {
            display: block;
        }
        .default-template.active {
            display: block;
        }
        .default-template {
            display: none;
        }
        
        /* PWA Enhancements */
        @media (display-mode: standalone) {
            body {
                -webkit-user-select: none;
                -webkit-touch-callout: none;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Hide template toggle in standalone mode */
            #globalToggle {
                display: none;
            }
            
            /* Add safe area padding for notched devices */
            header {
                padding-top: env(safe-area-inset-top);
            }
            
            /* Enhance touch targets */
            .tool-card {
                min-height: 44px;
            }
            
            a, button {
                min-height: 44px;
                min-width: 44px;
            }
        }
        
        /* Prevent zoom on form inputs */
        input, select, textarea {
            font-size: 16px;
        }
        
        /* App-like loading animation */
        .app-loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #1E3A8A;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }
        
        .app-loading.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">
    <!-- App Loading Screen -->
    <div id="appLoading" class="app-loading">
        <div class="text-center text-white">
            <div class="loading-spinner mx-auto mb-4"></div>
            <div class="text-lg font-semibold">ETASV Training Hub</div>
            <div class="text-sm text-blue-200">Loading...</div>
        </div>
    </div>

    <!-- Default Template -->
    <div id="defaultTemplate" class="default-template">
    <!-- Header -->
    <header class="gradient-bg text-white">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center">
                <div class="flex justify-center items-center mb-4">
                    <div class="icon-bg rounded-full p-3 mr-4">
                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-bold">E-Calc Hub</h1>
                </div>
                <p class="text-xl text-blue-100 max-w-2xl mx-auto">
                    Professional calculation tools for electricians. Quick, accurate, and jobsite-ready.
                </p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12">
        <!-- Featured Tools Section -->
        <section class="mb-12">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-3">Essential Calculation Tools</h2>
                <p class="text-lg text-slate-600 max-w-2xl mx-auto">
                    Access the most commonly used electrical calculators, designed for speed and accuracy on every job.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                <!-- Motor Calculator -->
                <a href="http://ihpcalc.s3-website.us-east-2.amazonaws.com/" 
                   class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl">
                    <div class="flex items-start space-x-4">
                        <div class="icon-bg rounded-lg p-3 flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-slate-800 mb-2">Motor HP Calculator</h3>
                            <p class="text-slate-600 text-sm mb-3">
                                Calculate motor horsepower, current draw, and electrical parameters for motor installations.
                            </p>
                            <div class="flex items-center text-electric-orange text-sm font-medium">
                                <span>Open Calculator</span>
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- Voltage Drop Calculator -->
                <a href="http://egc-voltage-drop.s3-website.us-east-2.amazonaws.com/" 
                   class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl">
                    <div class="flex items-start space-x-4">
                        <div class="icon-bg rounded-lg p-3 flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zM20.1 3H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM20 20H4V4h16v16z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-slate-800 mb-2">Voltage Drop Calculator</h3>
                            <p class="text-slate-600 text-sm mb-3">
                                Calculate voltage drop for equipment grounding conductors and branch circuits.
                            </p>
                            <div class="flex items-center text-electric-orange text-sm font-medium">
                                <span>Open Calculator</span>
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- Conduit Fill Calculator -->
                <a href="http://electricalcalculatortest.s3-website.us-east-2.amazonaws.com/" 
                   class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl">
                    <div class="flex items-start space-x-4">
                        <div class="icon-bg rounded-lg p-3 flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-slate-800 mb-2">Conduit Fill & Weight</h3>
                            <p class="text-slate-600 text-sm mb-3">
                                Calculate conduit fill percentages and total weight for wire installations.
                            </p>
                            <div class="flex items-center text-electric-orange text-sm font-medium">
                                <span>Open Calculator</span>
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- Gutter Calculator -->
                <a href="https://jelloshooter848.github.io/gutter-sizing-calc/" 
                   class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl">
                    <div class="flex items-start space-x-4">
                        <div class="icon-bg rounded-lg p-3 flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M21 8V7l-3 2-3-2v1l3 2 3-2zM7.5 6.5C7.5 5.12 8.62 4 10 4s2.5 1.12 2.5 2.5S11.38 9 10 9 7.5 7.88 7.5 6.5zM16 4c1.38 0 2.5 1.12 2.5 2.5S17.38 9 16 9s-2.5-1.12-2.5-2.5S14.62 4 16 4zM12 12c-2.21 0-4 1.79-4 4v4h8v-4c0-2.21-1.79-4-4-4z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-slate-800 mb-2">Gutter & Wireway Sizing</h3>
                            <p class="text-slate-600 text-sm mb-3">
                                Size auxiliary gutters and surface wireways according to NEC requirements.
                            </p>
                            <div class="flex items-center text-electric-orange text-sm font-medium">
                                <span>Open Calculator</span>
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- 3D Pull Box Calculator -->
                <a href="https://jamesalmeida.github.io/pull-box-sizing-calculator/" 
                   class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl">
                    <div class="flex items-start space-x-4">
                        <div class="icon-bg rounded-lg p-3 flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18-.21 0-.41-.06-.57-.18l-7.9-4.44A.991.991 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18.21 0 .41.06.57.18l7.9 4.44c.32.17.53.5.53.88v9z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-slate-800 mb-2">Pull Box Sizing Calculator</h3>
                            <p class="text-slate-600 text-sm mb-3">
                                Determine minimum pull box and junction box sizes per NEC Article 314 with 3D visualization.
                            </p>
                            <div class="flex items-center text-electric-orange text-sm font-medium">
                                <span>Open Calculator</span>
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </section>

        <!-- Quick Access Section -->
        <section class="bg-white rounded-2xl shadow-lg p-8 mb-12">
            <div class="text-center mb-6">
                <h3 class="text-2xl font-bold text-slate-800 mb-2">Why Choose E-Calc Hub?</h3>
                <p class="text-slate-600">Built by electricians, for electricians</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="icon-bg rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28L13 12V8z"/>
                        </svg>
                    </div>
                    <h4 class="text-lg font-semibold text-slate-800 mb-2">Job Site Ready</h4>
                    <p class="text-slate-600 text-sm">Mobile-optimized calculators that work offline and load instantly</p>
                </div>
                
                <div class="text-center">
                    <div class="icon-bg rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <h4 class="text-lg font-semibold text-slate-800 mb-2">NEC Compliant</h4>
                    <p class="text-slate-600 text-sm">All calculations follow current National Electrical Code standards</p>
                </div>
                
                <div class="text-center">
                    <div class="icon-bg rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                    </div>
                    <h4 class="text-lg font-semibold text-slate-800 mb-2">Always Available</h4>
                    <p class="text-slate-600 text-sm">Free access to all tools with no registration required</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <div class="flex justify-center items-center mb-4">
                    <div class="icon-bg rounded-full p-2 mr-3">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <span class="text-xl font-semibold">E-Calc Hub</span>
                </div>
                <p class="text-slate-400 mb-4">Professional electrical calculation tools for the modern electrician</p>
                <p class="text-slate-500 text-sm">© 2025 E-Calc Hub. All rights reserved.</p>
            </div>
        </div>
        
    </footer>
    </div>

    <!-- ETASV Template -->
    <div id="etasvTemplate" class="etasv-template">
    <!-- Header -->
    <header class="etasv-gradient-bg text-white">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center">
                <div class="mb-6">
                    <img src="photos/etasv_logo.png" alt="ETASV Logo" class="h-20 mx-auto bg-white rounded-lg p-3 shadow-lg">
                </div>
                <div class="mb-4">
                    <h1 class="text-4xl md:text-5xl font-bold">ETASV App Hub</h1>
                </div>
                <p class="text-xl text-blue-100 max-w-3xl mx-auto etasv-light-text">
                    Your central hub for apprentice training, journeyman upgrade courses, and professional resources. Everything you need all in one place.
                </p>
                <div class="mt-4 text-blue-200 text-sm etasv-light-text">
                    Electrical Training Alliance of Silicon Valley
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12">
        <!-- Essential Access Section -->
        <section class="mb-12">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-etasv-navy mb-3">Essential Training Resources</h2>
                <p class="text-lg text-etasv-gray max-w-2xl mx-auto">
                    Quick access to your most important learning platforms and professional tools.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-12">
                <!-- Apprentice Portal -->
                <a href="apprentice-portal.html" 
                   class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl border-l-4 border-transparent hover:border-etasv-blue">
                    <div class="flex items-start space-x-4">
                        <div class="etasv-icon-bg rounded-lg p-3 flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-etasv-navy mb-2">TradeSchool App</h3>
                            <p class="text-etasv-gray text-sm mb-3">
                                Access your OJT "bluebook", certifications, personal info, and apprenticeship progress.
                            </p>
                            <div class="flex items-center text-etasv-blue text-sm font-medium">
                                <span>Login to Portal</span>
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- Canvas LMS -->
                <a href="canvas-lms.html" 
                   class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl border-l-4 border-transparent hover:border-etasv-blue">
                    <div class="flex items-start space-x-4">
                        <div class="etasv-icon-bg rounded-lg p-3 flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-etasv-navy mb-2">Canvas LMS</h3>
                            <p class="text-etasv-gray text-sm mb-3">
                                Access course materials, submit assignments, view grades, and communicate with instructors.
                            </p>
                            <div class="flex items-center text-etasv-blue text-sm font-medium">
                                <span>Access Canvas</span>
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </a>

                <!-- Journeyman Courses -->
                <a href="journeyman-courses.html" 
                   class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl border-l-4 border-transparent hover:border-etasv-blue">
                    <div class="flex items-start space-x-4">
                        <div class="etasv-icon-bg rounded-lg p-3 flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-etasv-navy mb-2">Journeyman Upgrade Classes</h3>
                            <p class="text-etasv-gray text-sm mb-3">
                                Continuing education courses for journeymen including code updates and specialty training.
                            </p>
                            <div class="flex items-center text-etasv-blue text-sm font-medium">
                                <span>View Courses</span>
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </a>
                 <!-- Electrical Calculators -->
                <a href="calculators.html" 
                   class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl border-l-4 border-transparent hover:border-etasv-blue">
                    <div class="flex items-start space-x-4">
                        <div class="etasv-icon-bg rounded-lg p-3 flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M9 7h6v2H9zm0 4h6v2H9zm0 4h6v2H9zM4 7h2v2H4zm0 4h2v2H4zm0 4h2v2H4zM20.1 3H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM20 20H4V4h16v16z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-etasv-navy mb-2">Electrical Calculators</h3>
                            <p class="text-etasv-gray text-sm mb-3">
                                Professional electrical calculation tools.
                            </p>
                            <div class="flex items-center text-etasv-blue text-sm font-medium">
                                <span>Access Tools</span>
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </section>


        <!-- Additional Resources Section -->
        <section class="mb-12">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-etasv-navy mb-3">Additional Resources & Tools</h2>
                <p class="text-lg text-etasv-gray max-w-2xl mx-auto">
                    Expand your learning with reference materials, safety resources, and professional development tools.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8">
                <!-- IBEW 332 Dispatch -->
                <a href="ibew332-dispatch.html" class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl border-l-4 border-transparent hover:border-etasv-blue">
                    <div class="text-center">
                        <div class="etasv-icon-bg rounded-lg p-3 flex-shrink-0 mx-auto mb-3 w-fit">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2z"/>
                            </svg>
                        </div>
                        <h4 class="text-lg font-semibold text-etasv-navy mb-2">IBEW 332 Dispatch</h4>
                        <p class="text-etasv-gray text-xs">Work calls and job dispatch system</p>
                    </div>
                </a>

                <!-- IBEW 332 Benefits -->
                <a href="ibew332-benefits.html" class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl border-l-4 border-transparent hover:border-etasv-blue">
                    <div class="text-center">
                        <div class="etasv-icon-bg rounded-lg p-3 flex-shrink-0 mx-auto mb-3 w-fit">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                            </svg>
                        </div>
                        <h4 class="text-lg font-semibold text-etasv-navy mb-2">IBEW 332 Benefits</h4>
                        <p class="text-etasv-gray text-xs">Health, pension, and benefits portal</p>
                    </div>
                </a>
            </div>
        </section>

        <!-- News Section -->
        <section class="mb-12">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-etasv-navy mb-3">News</h2>
                <p class="text-lg text-etasv-gray max-w-2xl mx-auto">
                    Stay informed with the latest ETASV newsletters, announcements, and industry updates.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8">
                <!-- The Plug -->
                <a href="the-plug.html" class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl border-l-4 border-transparent hover:border-etasv-blue">
                    <div class="text-center">
                        <div class="etasv-icon-bg rounded-lg p-3 flex-shrink-0 mx-auto mb-3 w-fit">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                            </svg>
                        </div>
                        <h4 class="text-lg font-semibold text-etasv-navy mb-2">The Plug</h4>
                        <p class="text-etasv-gray text-xs">ETASV newsletter and announcements</p>
                    </div>
                </a>

                <!-- Conduits of Change -->
                <a href="conduits-of-change.html" class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl border-l-4 border-transparent hover:border-etasv-blue">
                    <div class="text-center">
                        <div class="etasv-icon-bg rounded-lg p-3 flex-shrink-0 mx-auto mb-3 w-fit">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        </div>
                        <h4 class="text-lg font-semibold text-etasv-navy mb-2">Conduits of Change</h4>
                        <p class="text-etasv-gray text-xs">IBEW Local 332 quarterly newsletter</p>
                    </div>
                </a>

                <!-- The Electrical Worker -->
                <a href="electrical-worker.html" class="tool-card block bg-white rounded-xl shadow-lg p-6 hover:shadow-xl border-l-4 border-transparent hover:border-etasv-blue">
                    <div class="text-center">
                        <div class="etasv-icon-bg rounded-lg p-3 flex-shrink-0 mx-auto mb-3 w-fit">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                            </svg>
                        </div>
                        <h4 class="text-lg font-semibold text-etasv-navy mb-2">The Electrical Worker</h4>
                        <p class="text-etasv-gray text-xs">IBEW International monthly newsletter</p>
                    </div>
                </a>
            </div>
        </section>

        <!-- Coming Soon Section -->
        <section class="bg-gradient-to-r from-etasv-light to-blue-50 rounded-2xl shadow-lg p-8 mb-12">
            <div class="text-center mb-6">
                <h3 class="text-2xl font-bold text-etasv-navy mb-2">Coming Soon</h3>
                <p class="text-etasv-gray">Exciting new features in development for the ETASV App Hub</p>
            </div>
            
            <div class="max-w-md mx-auto">
                <div class="text-center p-6">
                    <div class="bg-etasv-blue/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-etasv-blue" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"/>
                        </svg>
                    </div>
                    <h4 class="text-lg font-semibold text-etasv-navy mb-2">Mobile App</h4>
                    <p class="text-etasv-gray">Native iOS and Android apps for offline access and jobsite use. Take your training resources anywhere.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-etasv-navy text-white py-8">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <div class="flex justify-center items-center mb-4">
                    <img src="photos/etasv_logo.png" alt="ETASV Logo" class="h-8 mr-3 bg-white rounded p-1">
                    <span class="text-xl font-semibold">ETASV App Hub</span>
                </div>
                <p class="text-blue-300 mb-2">Electrical Training Alliance of Silicon Valley</p>
                <p class="text-blue-400 mb-4 text-sm">Comprehensive training resources and professional tools for IBEW Local 332 apprentices and journeymen</p>
                <p class="text-blue-500 text-sm">© 2025 Electrical Training Alliance of Silicon Valley. All rights reserved.</p>
            </div>
        </div>
        
    </footer>
    </div>

    <!-- Global Template Toggle -->
    <div id="globalToggle" class="bg-slate-700 py-3">
        <div class="container mx-auto px-4 text-center">
            <button id="templateToggle" class="toggle-button text-blue-400 hover:text-blue-200 text-xs font-medium">
                <span id="toggleText">View E-Calc Hub</span>
            </button>
        </div>
    </div>

    <script>
        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch((error) => {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }

        // PWA Install Prompt
        let deferredPrompt;
        let installButton = null;

        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('PWA install prompt triggered');
            e.preventDefault();
            deferredPrompt = e;
            showInstallPromotion();
        });

        function showInstallPromotion() {
            if (installButton) return; // Already showing

            installButton = document.createElement('div');
            installButton.innerHTML = `
                <div id="install-banner" class="fixed bottom-4 left-4 right-4 bg-etasv-blue text-white p-4 rounded-lg shadow-lg z-50 transform translate-y-0 transition-transform duration-300">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-6 h-6 mr-3" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                            <div>
                                <div class="font-semibold text-sm">Install ETASV App</div>
                                <div class="text-xs text-blue-200">Add to your home screen for quick access</div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button id="install-app-btn" class="bg-white text-etasv-blue px-3 py-1 rounded text-sm font-medium hover:bg-blue-50">
                                Install
                            </button>
                            <button id="dismiss-install-btn" class="text-blue-200 hover:text-white">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(installButton);

            // Install button click handler
            document.getElementById('install-app-btn').addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log(`User response to the install prompt: ${outcome}`);
                    deferredPrompt = null;
                    hideInstallPromotion();
                }
            });

            // Dismiss button click handler
            document.getElementById('dismiss-install-btn').addEventListener('click', () => {
                hideInstallPromotion();
                localStorage.setItem('installPromptDismissed', Date.now());
            });

            // Auto-hide after 10 seconds
            setTimeout(() => {
                if (installButton) {
                    hideInstallPromotion();
                }
            }, 10000);
        }

        function hideInstallPromotion() {
            if (installButton) {
                const banner = installButton.querySelector('#install-banner');
                if (banner) {
                    banner.style.transform = 'translateY(100%)';
                    setTimeout(() => {
                        if (installButton && installButton.parentNode) {
                            installButton.parentNode.removeChild(installButton);
                        }
                        installButton = null;
                    }, 300);
                }
            }
        }

        // Check if user previously dismissed the prompt (within last 7 days)
        function shouldShowInstallPrompt() {
            const dismissed = localStorage.getItem('installPromptDismissed');
            if (!dismissed) return true;
            
            const dismissedTime = parseInt(dismissed);
            const oneWeekAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
            return dismissedTime < oneWeekAgo;
        }

        // Handle successful app installation
        window.addEventListener('appinstalled', (evt) => {
            console.log('PWA was installed successfully');
            hideInstallPromotion();
            
            // Optional: Show success message
            const successBanner = document.createElement('div');
            successBanner.innerHTML = `
                <div class="fixed top-4 left-4 right-4 bg-green-500 text-white p-3 rounded-lg shadow-lg z-50">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <span class="text-sm font-medium">ETASV App installed successfully!</span>
                    </div>
                </div>
            `;
            document.body.appendChild(successBanner);
            
            setTimeout(() => {
                if (successBanner.parentNode) {
                    successBanner.parentNode.removeChild(successBanner);
                }
            }, 3000);
        });

        document.addEventListener('DOMContentLoaded', () => {
            console.log('ETASV App Hub loaded successfully');
            
            // Hide loading screen after app is ready
            setTimeout(() => {
                const loadingScreen = document.getElementById('appLoading');
                if (loadingScreen) {
                    loadingScreen.classList.add('hidden');
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }
            }, 1500);
            
            // Detect if running in standalone mode (PWA)
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches 
                               || window.navigator.standalone 
                               || document.referrer.includes('android-app://');
            
            if (isStandalone) {
                console.log('Running in PWA standalone mode');
                document.body.classList.add('pwa-standalone');
                
                // Prevent page refresh gesture on mobile
                document.body.addEventListener('touchstart', e => {
                    if (e.touches.length > 1) {
                        e.preventDefault();
                    }
                });
                
                let lastTouchEnd = 0;
                document.body.addEventListener('touchend', e => {
                    const now = (new Date()).getTime();
                    if (now - lastTouchEnd <= 300) {
                        e.preventDefault();
                    }
                    lastTouchEnd = now;
                }, false);
                
                // Add haptic feedback for button interactions
                document.querySelectorAll('button, .tool-card').forEach(element => {
                    element.addEventListener('click', () => {
                        if (navigator.vibrate) {
                            navigator.vibrate(10);
                        }
                    });
                });
            }
            
            // Template switching functionality
            let isETASVTemplate = true;
            const toggleButton = document.getElementById('templateToggle');
            const toggleText = document.getElementById('toggleText');
            const defaultTemplate = document.getElementById('defaultTemplate');
            const etasvTemplate = document.getElementById('etasvTemplate');
            const globalToggle = document.getElementById('globalToggle');
            
            toggleButton.addEventListener('click', () => {
                isETASVTemplate = !isETASVTemplate;
                
                console.log('Toggle clicked. isETASVTemplate:', isETASVTemplate);
                console.log('defaultTemplate:', defaultTemplate);
                console.log('etasvTemplate:', etasvTemplate);
                
                if (isETASVTemplate) {
                    // Switch to ETASV template
                    defaultTemplate.style.display = 'none';
                    etasvTemplate.style.display = 'block';
                    toggleText.textContent = 'View E-Calc Hub';
                    toggleButton.className = 'toggle-button text-blue-400 hover:text-blue-200 text-xs font-medium';
                    globalToggle.className = 'bg-slate-700 py-3';
                    document.title = 'ETASV App Hub - Training Tools for Electricians';
                    console.log('Switched to ETASV template');
                } else {
                    // Switch to default template
                    defaultTemplate.style.display = 'block';
                    etasvTemplate.style.display = 'none';
                    toggleText.textContent = 'View ETASV Version';
                    toggleButton.className = 'toggle-button text-gray-400 hover:text-gray-200 text-xs font-medium';
                    globalToggle.className = 'bg-gray-700 py-3';
                    document.title = 'E-Calc Hub - Essential Tools for Electricians';
                    console.log('Switched to E-Calc Hub template');
                }
            });
            
            // Add click tracking for tool cards
            document.querySelectorAll('.tool-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    const toolName = card.querySelector('h3').textContent;
                    const currentTemplate = isETASVTemplate ? 'ETASV' : 'E-Calc Hub';
                    console.log(`Opening tool: ${toolName} from ${currentTemplate} template`);
                });
            });
            
            // PWA Navigation Management - Prevent breaking out of PWA context
            function handleInternalNavigation() {
                const isStandaloneMode = window.matchMedia('(display-mode: standalone)').matches 
                                      || window.navigator.standalone 
                                      || document.referrer.includes('android-app://');
                
                if (!isStandaloneMode) return; // Only apply in PWA mode
                
                console.log('PWA Navigation: Setting up internal link handling');
                
                // Get all links on the page
                const links = document.querySelectorAll('a[href]');
                
                links.forEach(link => {
                    const href = link.getAttribute('href');
                    
                    // Check if it's an internal link
                    if (href && 
                        !href.startsWith('http://') && 
                        !href.startsWith('https://') && 
                        !href.startsWith('mailto:') && 
                        !href.startsWith('tel:') &&
                        !href.startsWith('#')) {
                        
                        console.log(`PWA Navigation: Setting up handler for internal link: ${href}`);
                        
                        link.addEventListener('click', (e) => {
                            // Let the normal navigation happen, but ensure it stays in PWA
                            console.log(`PWA Navigation: Navigating to ${href} within PWA context`);
                            
                            // Add a small delay to ensure proper navigation
                            setTimeout(() => {
                                // If navigation somehow failed, reload the page to stay in PWA
                                if (window.location.href.includes(href.replace('.html', ''))) {
                                    console.log('PWA Navigation: Successfully navigated within PWA');
                                }
                            }, 100);
                        });
                    }
                });
            }
            
            // Initialize PWA navigation handling
            handleInternalNavigation();
        });
    </script>
</body>
</html>